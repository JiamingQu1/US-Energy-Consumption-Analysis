[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "US Energy Consumption Analysis",
    "section": "",
    "text": "1 Introduction\nUnderstanding household electricity usage is a critical aspect of advancing energy policy, promoting sustainability, and addressing socioeconomic disparities. Residential electricity consumption represents a substantial portion of global energy demand, making it a key area for targeted interventions aimed at reducing greenhouse gas emissions and mitigating climate change. By analyzing household energy behavior, this project can uncover patterns and drivers of electricity usage, providing essential insights for policymakers, utility companies, and urban planners to design energy-efficient systems that align with sustainability goals.\nThe analysis aims to explore the factors influencing household electricity usage and costs, providing a comprehensive understanding of how geographic, climatic, housing, and socioeconomic variables interact with energy consumption. Specifically, we will examine:\nGeographic and Climatic Impact: Analyze how urbanization levels (UATYP10), heating degree days (HDD65), and cooling degree days (CDD65) affect electricity usage and costs, highlighting regional variations and the influence of climate on energy demands.\nHousing Characteristics: Investigate the role of housing types (TYPEHUQ) in shaping energy consumption patterns, considering structural factors such as insulation and appliance use.\nSocioeconomic Factors: Assess the relationship between household income (MONEYPY) and electricity usage (KWH), as well as the mitigating effect of energy assistance programs (ENERGYASST20) on energy costs (DOLLAREL).\nEnergy Burden and Efficiency: Evaluate the total electricity use (KWH) and costs (DOLLAREL) to identify disparities in energy burden and opportunities for promoting energy efficiency.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nThere is a total of 799 features in this dataset, but for the purpose of this analysis, we investigate the relationship between household total electricity use (KWH) with the following features:\nAs these data are all unified under the same source, we can analyze from various economic and geographic dimensions without the need to merge many datasets and deal with the different granularity of data. Hence, this study mainly uses the RECS dataset, but may include other data sources later in the project based on necessity.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "",
    "text": "Climatic Impact:\n\nHDD65 (Heating degree days in 2020)\nCDD65 (Cooling degree days in 2020)\n\nGeographic Impact:\n\nstate_postal (State and State Postal)\nUATYP10 (2010 Census Urban Type Code)\nTYPEHUQ (Type of housing unit)\n\nSocioeconomic Factors\n\nMONEYPY (Annual gross household income for the past year)\nENERGYASST20 (Received energy assistance )",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\n# Setup\nlibrary(tidyverse)\ndf &lt;- read.csv('recs2020.csv')\n\n# We want to understand which columns have the most na's\n# This also helps us know if the columns we are using are affected\nna_counts &lt;- colSums(is.na(df)) |&gt; sort(decreasing = TRUE)  \n# head(na_counts, 15)\n\n# Select only the columns we are interested in\nenergy &lt;- df |&gt;\n  select(state_postal, KWH, DOLLAREL, HDD65, CDD65, UATYP10, TYPEHUQ, MONEYPY, ENERGYASST20)\n\n\nWe first understand that the columns with missing data are not in the set of columns that we need to use. However, we also want to check if the KWH values are 0 (which may indicate missing data). The check below shows that no KWH values are 0 as well, indicating that there is no potential missing or problematic data within the part of the dataset that we are working with,\n\n\nCode\n# Check KWH column if anything equals to 0\nsum(energy$KWH == 0)\n\n\n[1] 0\n\n\nCode\nlibrary(redav)\nplot_missing(energy, percent = FALSE)\n\n\n\n\n\n\n\n\n\nThis check suggests that the section of the dataset we are using for this project is complete and we do not need to work with missing data.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 EDA\n10 plots:\nInclude Alluviam and PCA\nIf we want to focus on NY, there are 904 rows altogether\nLGTINLED: Portion of inside light bulbs that are LED SMARTMETER: Whether there is a smartmeter ATHOME: COOLCNTL: Cooling method of control. HEATCNTL: Heating method of control. TYPETHERM\nFind: average cost of electricity Reference:\nCode\ndf &lt;- read.csv('recs2020.csv')\nenergy &lt;- df |&gt;\n  select(state_name, state_postal, KWH, DOLLAREL, HDD65, CDD65, UATYP10, TYPEHUQ, MONEYPY, ENERGYASST20, BA_climate, DIVISION, YEARMADERANGE, KOWNRENT, COOLCNTL, HEATCNTL, LGTINLED, SMARTMETER, TYPETHERM, ATHOME)\n\nwrite.csv(energy, \"recs2020cleaned.csv\")\n\nenergy &lt;- read.csv('recs2020cleaned.csv')\nsummary(energy)\n\n\n       X          state_name        state_postal            KWH           \n Min.   :    1   Length:18496       Length:18496       Min.   :    42.01  \n 1st Qu.: 4625   Class :character   Class :character   1st Qu.:  5921.97  \n Median : 9248   Mode  :character   Mode  :character   Median :  9346.43  \n Mean   : 9248                                         Mean   : 10848.82  \n 3rd Qu.:13872                                         3rd Qu.: 14155.33  \n Max.   :18496                                         Max.   :184101.84  \n    DOLLAREL           HDD65           CDD65        UATYP10         \n Min.   : -889.5   Min.   :    0   Min.   :   0   Length:18496      \n 1st Qu.:  836.5   1st Qu.: 2434   1st Qu.: 814   Class :character  \n Median : 1257.9   Median : 4396   Median :1179   Mode  :character  \n Mean   : 1424.8   Mean   : 4272   Mean   :1526                     \n 3rd Qu.: 1819.0   3rd Qu.: 5810   3rd Qu.:1805                     \n Max.   :15680.2   Max.   :17383   Max.   :5534                     \n    TYPEHUQ         MONEYPY       ENERGYASST20     BA_climate       \n Min.   :1.000   Min.   : 1.00   Min.   :-2.000   Length:18496      \n 1st Qu.:2.000   1st Qu.: 9.00   1st Qu.:-2.000   Class :character  \n Median :2.000   Median :13.00   Median :-2.000   Mode  :character  \n Mean   :2.547   Mean   :11.64   Mean   :-1.877                     \n 3rd Qu.:3.000   3rd Qu.:15.00   3rd Qu.:-2.000                     \n Max.   :5.000   Max.   :16.00   Max.   : 1.000                     \n   DIVISION         YEARMADERANGE      KOWNRENT        COOLCNTL     \n Length:18496       Min.   :1.000   Min.   :1.000   Min.   :-2.000  \n Class :character   1st Qu.:3.000   1st Qu.:1.000   1st Qu.: 1.000  \n Mode  :character   Median :5.000   Median :1.000   Median : 2.000  \n                    Mean   :4.543   Mean   :1.283   Mean   : 1.655  \n                    3rd Qu.:6.000   3rd Qu.:2.000   3rd Qu.: 3.000  \n                    Max.   :9.000   Max.   :3.000   Max.   :99.000  \n    HEATCNTL         LGTINLED       SMARTMETER       TYPETHERM     \n Min.   :-2.000   Min.   :0.000   Min.   :-4.000   Min.   :-2.000  \n 1st Qu.: 1.000   1st Qu.:1.000   1st Qu.:-4.000   1st Qu.: 1.000  \n Median : 2.000   Median :2.000   Median : 0.000   Median : 2.000  \n Mean   : 2.068   Mean   :2.055   Mean   :-1.415   Mean   : 1.532  \n 3rd Qu.: 3.000   3rd Qu.:3.000   3rd Qu.: 1.000   3rd Qu.: 2.000  \n Max.   :99.000   Max.   :4.000   Max.   : 1.000   Max.   : 3.000  \n     ATHOME     \n Min.   :0.000  \n 1st Qu.:4.000  \n Median :5.000  \n Mean   :4.184  \n 3rd Qu.:5.000  \n Max.   :5.000  \n\n\nCode\naverage_KWH_state &lt;- energy |&gt; \n  group_by(state_name) |&gt; \n  summarise(avg_KWH = mean(KWH, na.rm = TRUE))\nlibrary(jsonlite)\n\n\n\nAttaching package: 'jsonlite'\n\n\nThe following object is masked from 'package:purrr':\n\n    flatten\n\n\nCode\njson_data &lt;- toJSON(average_KWH_state, pretty = TRUE)\nwrite(json_data, \"output.json\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#eda",
    "href": "results.html#eda",
    "title": "3  Results",
    "section": "",
    "text": "Climate:\n\n\n(DONE) Geolocation: electricity consumption by the location\nScatterplot and geomsmooth of HDD65 and CDD65 (need to find some other indicators)\n\nwhat can we suggest?\n\n(DONE) ridgeline (could change into boxplot) plot of electrical consumption by type of habitat.\n\n\nSocio-economic:\n\n\n(DONE) Electricity usage vs income bracket, color by whether energy assistance (red color, try to set a different alpha to make it more obvious)\n\nFocus on a specific states (if no clear argument, focus on NY).\n\nRelationship between electricity consumption and price of electricity.\n\n\nWhat kind of households should we be targetting?\n\n\nBarplot of electricity usage and type of housing\n(DONE) Electricity usage vs income bracket (facet by type of housing)\nbarplot of states facet by housing category (which state should focus on which housing category).",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#mapping-by-geolocation",
    "href": "results.html#mapping-by-geolocation",
    "title": "3  Results",
    "section": "3.2 Mapping by geolocation",
    "text": "3.2 Mapping by geolocation\n\n\nCode\nlibrary(maps)\n\n\n\nAttaching package: 'maps'\n\n\nThe following object is masked from 'package:purrr':\n\n    map\n\n\nCode\n# Example dataset: Replace 'data' with your actual dataset\n# Calculate average consumption by state\nstate_consumption &lt;- energy |&gt;\n  group_by(state_name) |&gt;\n  summarize(avg_consumption = mean(KWH), \n            avg_cost = mean(DOLLAREL),\n            avg_hdd65 = mean(HDD65),\n            avg_cdd65 = mean(CDD65))\n\n\n\n\nCode\n# Load US map data\nus_map &lt;- map_data(\"state\")\n\n# Match state_postal with full state names for joining\nstate_consumption &lt;- state_consumption |&gt;\n  mutate(state = tolower(state_name)) |&gt;\n  drop_na()\n\n# Merge map and consumption data\nmap_data &lt;- us_map |&gt;\n  left_join(state_consumption, by = c(\"region\" = \"state\"))\n\n# Plot\nggplot(map_data, aes(x = long, y = lat, group = group, fill = avg_consumption)) +\n  geom_polygon(color = \"white\") +\n  coord_fixed(1.3) +\n  scale_fill_gradient(name = \"Avg. Electricity Usage (KWh)\",\n                      low = \"darkseagreen\", high = \"salmon\", na.value = \"gray90\") +\n  theme_minimal() +\n  labs(\n    title = \"Average Annual Energy Consumption per Household by State\",\n    subtitle = \"United States Energy Consumption Patterns\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nFirst instinct is: South seems to use energy more than the North.\nQuestion: Why does new England and California spend less electricity? Is it because of better weather?\nWe noticed that the colder areas are in general spending less electricity in general than the hotter areas. While some New England homes do use electric heating, the majority of heating in New England primarily relies on other sources like natural gas, heating oil, and propane, with natural gas being the most common option in densely populated areas; meaning that electricity is not the primary source of heating in New England, but is still used to some extent, particularly with the increasing adoption of electric heat pumps. So this may cause the colder areas to use less electricity in general.\nEnergy saving are more urgent on the south than on the north.\nOther usage of electricity\n\n\nCode\nlibrary(patchwork) # For arranging plots\n\n# Plot for HDD65\nhdd65_plot &lt;- ggplot(map_data, aes(x = long, y = lat, group = group, fill = avg_hdd65)) +\n  geom_polygon(color = \"white\") +\n  coord_fixed(1.3) +\n  scale_fill_gradient(name = \"Avg. HDD65\",\n                      low = \"lightblue\", high = \"darkblue\", na.value = \"gray90\") +\n  theme_minimal() +\n  labs(\n    title = \"Average Heating Degree Days (HDD65)\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank()\n  )\n\n# Plot for CDD65\ncdd65_plot &lt;- ggplot(map_data, aes(x = long, y = lat, group = group, fill = avg_cdd65)) +\n  geom_polygon(color = \"white\") +\n  coord_fixed(1.3) +\n  scale_fill_gradient(name = \"Avg. CDD65\",\n                      low = \"lightyellow\", high = \"red\", na.value = \"gray90\") +\n  theme_minimal() +\n  labs(\n    title = \"Average Cooling Degree Days (CDD65)\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank()\n  )\n\n# Combine the two plots side by side\ncombined_plot &lt;- hdd65_plot + cdd65_plot + \n  plot_layout(ncol = 2)\n\n# Display the combined plot\nprint(combined_plot)\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(forcats)  # For fct_reorder\nlibrary(ggridges)\n\ncustom_colors &lt;- c(\"Subarctic\" = 'purple',\n                   \"Very-Cold\" = 'cornflowerblue',\n                   \"Cold\" = 'skyblue',\n                   \"Marine\" = 'aquamarine',\n                   \"Mixed-Humid\" = 'palegreen',\n                   \"Hot-Humid\" = 'palegoldenrod',\n                   \"Mixed-Dry\" = 'lightsalmon',\n                   \"Hot-Dry\" = 'sandybrown')\n\n# Calculate the mean for each BA_climate\nmeans &lt;- energy |&gt;\n  group_by(BA_climate) |&gt;\n  summarize(mean_kwh = mean(KWH, na.rm = TRUE))\n\n# Create ridge plot with mean points\nggplot(energy, aes(\n  x = KWH,\n  y = fct_reorder(BA_climate, KWH, .fun = mean, .desc = TRUE),\n  fill = BA_climate\n)) +\n  geom_density_ridges(alpha = 0.7, scale = 1) +  # Ridge plot\n  geom_point(data = means, aes(x = mean_kwh, y = fct_reorder(BA_climate, mean_kwh, .desc = TRUE)), \n             color = \"black\", size = 3, shape = 24, fill = \"white\") +  # Add mean points\n  scale_x_continuous(limits = c(0, 35000)) +  # Limit x-axis\n  scale_fill_manual(values = custom_colors) +  # Custom fill colors\n  labs(\n    title = \"Ridge Plot of KWH by BA_climate with Mean Annotations\",\n    x = \"KWH\",\n    y = \"BA_climate\",\n    fill = \"Environment type\"\n  ) +\n  theme_minimal()\n\n\nPicking joint bandwidth of 1260\n\n\nWarning: Removed 150 rows containing non-finite outside the scale range\n(`stat_density_ridges()`).\n\n\n\n\n\n\n\n\n\nFurther suggest that main contributor is the use of airconditioning (or in general, for cooling). - Add some research for this.\nWanna see if the composition in different areas are the same.\n\n\nCode\n# Filter data for selected states\n# selected_states &lt;- c(\"NJ\")\n# \n# filtered_data &lt;- energy |&gt;\n#   filter(state_postal %in% selected_states) |&gt;\n#   count(BA_climate) |&gt;  # Count occurrences of each BA_climate category\n#   mutate(percentage = n / sum(n) * 100)  # Calculate percentage composition\n# \n# # Bar plot of BA_climate composition\n# ggplot(filtered_data, aes(x = reorder(BA_climate, -percentage), y = percentage, fill = BA_climate)) +\n#   geom_bar(stat = \"identity\") +\n#   coord_flip() +\n#   scale_fill_brewer(palette = \"Set3\") +\n#   labs(\n#     title = \"Composition of BA_climate in Selected States\",\n#     subtitle = \"New York, Connecticut, Massachusetts, New Jersey\",\n#     x = \"BA_climate Category\",\n#     y = \"Percentage (%)\"\n#   ) +\n#   theme_minimal() +\n#   theme(legend.position = \"none\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#urban-environment",
    "href": "results.html#urban-environment",
    "title": "3  Results",
    "section": "3.3 Urban environment:",
    "text": "3.3 Urban environment:\n\n\nCode\n# Ridge plot\nggplot(energy, aes(x = KWH, y = as.factor(UATYP10), fill = as.factor(UATYP10))) +\n  geom_density_ridges(alpha = 0.7, scale = 1) +  # Ridge plot\n  scale_fill_manual(values = c(\"C\" = \"skyblue\", \"U\" = \"lightgreen\", \"R\" = \"orange\"),\n                    labels = c(\"Urban Cluster\", \"Rural\", \"Urban\"))+\n  scale_x_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Ridge Plot of KWH by UATYP10\",\n    x = \"KWH\",\n    y = \"Urban Type Code (UATYP10)\",\n    fill = \"Urban Type\",\n  ) +\n  theme_minimal()\n\n\nPicking joint bandwidth of 1050\n\n\nWarning: Removed 21 rows containing non-finite outside the scale range\n(`stat_density_ridges()`).\n\n\n\n\n\n\n\n\n\nWhat are the kind of housing that is causing higher usage\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by TYPEHUQ\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(TYPEHUQ)) + \n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCategory 2, which is single-family house detached from any other house.\n\n\nCode\nenergy &lt;- energy |&gt;\n  mutate(TYPEHUQ = case_when(\n    TYPEHUQ == 1 ~ \"Mobile\",\n    TYPEHUQ == 2 ~ \"House detached\",\n    TYPEHUQ == 3 ~ \"House attached\",\n    TYPEHUQ == 4 ~ \"Apt in small building \",\n    TYPEHUQ == 5 ~ \"Apt in large building\",\n    TRUE ~ as.character(TYPEHUQ))) |&gt;\n  mutate(KOWNRENT = case_when(\n    KOWNRENT == 1 ~ \"Own\",\n    KOWNRENT == 2 ~ \"Rent\",\n    KOWNRENT == 3 ~ \"Occupy wo rent\"))\n\nggplot(energy, aes(x = as.factor(TYPEHUQ), y = KWH, fill = as.factor(TYPEHUQ))) +\n  geom_violin(trim = FALSE, alpha = 0.7) +  # Violin plot with full tails\n  scale_fill_brewer(palette = \"Set3\") +  \n  scale_y_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Energy Usage by Housing Type\",\n    x = \"Housing Type\",\n    y = \"Energy Usage (KWH)\",\n    fill = \"Housing Type\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\nWarning: Removed 21 rows containing non-finite outside the scale range\n(`stat_ydensity()`).\n\n\nWarning: Removed 186 rows containing missing values or values outside the scale range\n(`geom_violin()`).\n\n\n\n\n\n\n\n\n\nPercentage of a place/type of housing with poor heating or cooling practices.\n1 Set one temperature and leave it there most of the time 2 Manually adjust the temperature 3 Programmable or smart thermostat automatically adjusts the temperature 4 Turn equipment on or off as needed Category 2 and 4 incurs lower energy usage. These are manual practices, which suggests that we should encourage active usage, This is particularly true in xxx states.\n\n\nCode\n# Filter the data to remove unwanted COOLCNTL values\nfiltered_energy &lt;- energy %&gt;%\n  filter(COOLCNTL != 99, COOLCNTL != -2)\n\n# Create a faceted boxplot\nggplot(filtered_energy, aes(x = as.factor(COOLCNTL), y = KWH, fill = as.factor(COOLCNTL))) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +  # Boxplot without outliers\n  scale_fill_brewer(palette = \"Set3\") +  \n  scale_y_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Energy Usage by Cooling Control\",\n    x = \"Cooling Control\",\n    y = \"Energy Usage (KWH)\",\n    fill = \"Cooling Control\"\n  ) +\n  facet_wrap(~DIVISION) +  # Facet by DIVISION\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\nWarning: Removed 20 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = as.factor(COOLCNTL), y = KWH, fill = as.factor(COOLCNTL))) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +  # Boxplot without outliers\n  scale_fill_brewer(palette = \"Set3\") +  \n  scale_y_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Energy Usage by Cooling Habits\",\n    x = \"check yourself\",\n    y = \"Energy Usage (KWH)\",\n    fill = \"Housing Year\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\nWarning: Removed 21 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = as.factor(HEATCNTL), y = KWH, fill = as.factor(HEATCNTL))) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +  # Boxplot without outliers\n  scale_fill_brewer(palette = \"Set3\") +  \n  scale_y_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Energy Usage by Heating Habits\",\n    x = \"check yourself\",\n    y = \"Energy Usage (KWH)\",\n    fill = \"Housing Year\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\nWarning: Removed 21 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = as.factor(KOWNRENT), y = KWH, fill = as.factor(KOWNRENT))) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +  # Boxplot without outliers\n  scale_fill_brewer(palette = \"Set3\") +  \n  scale_y_continuous(limits = c(0, 50000)) +\n  labs(\n    title = \"Energy Usage by Housing Type\",\n    x = \"Housing Type\",\n    y = \"Energy Usage (KWH)\",\n    fill = \"Housing Year\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n\n\nWarning: Removed 21 rows containing non-finite outside the scale range\n(`stat_boxplot()`).\n\n\n\n\n\n\n\n\n\nLED 灯, aircon habit LGTINLED: Portion of inside light bulbs that are LED SMARTMETER: Whether there is a smartmeter ATHOME: COOLCNTL: Cooling method of control. HEATCNTL: Heating method of control. TYPETHERM:\n\n\nCode\n# Categorize and summarize data\ngrouped_data &lt;- energy %&gt;%\n  filter(COOLCNTL %in% c(1, 2, 3, 4)) %&gt;%  # Retain only categories 1, 2, 3, and 4\n  mutate(category_group = case_when(\n    COOLCNTL %in% c(1, 3) ~ \"Group 1 & 3\",\n    COOLCNTL %in% c(2, 4) ~ \"Group 2 & 4\"\n  )) %&gt;%\n  group_by(state_postal, category_group) %&gt;%\n  summarize(mean_kwh = mean(KWH, na.rm = TRUE), .groups = \"drop\")\n\n# Perform statistical tests\ntest_results &lt;- energy %&gt;%\n  filter(COOLCNTL %in% c(1, 2, 3, 4)) %&gt;%\n  mutate(category_group = case_when(\n    COOLCNTL %in% c(1, 3) ~ \"Group 1 & 3\",\n    COOLCNTL %in% c(2, 4) ~ \"Group 2 & 4\"\n  )) %&gt;%\n  group_by(state_postal) %&gt;%\n  summarize(\n    p_value = t.test(\n      KWH[category_group == \"Group 1 & 3\"],\n      KWH[category_group == \"Group 2 & 4\"],\n      var.equal = TRUE\n    )$p.value,\n    .groups = \"drop\"\n  )\n\n# Merge test results for visualization\nvisualization_data &lt;- grouped_data %&gt;%\n  left_join(test_results, by = \"state_postal\")\n\nlibrary(tidyr)  # For pivot_wider\nlibrary(dplyr)\nlibrary(ggplot2)\n\n# Pivot visualization_data to wider format and calculate net difference\ndifference_data &lt;- visualization_data %&gt;%\n  pivot_wider(\n    names_from = category_group,\n    values_from = mean_kwh\n  ) %&gt;%\n  mutate(net_difference = `Group 1 & 3` - `Group 2 & 4`) %&gt;%\n  arrange(desc(abs(net_difference)))  # Sort by absolute difference for clarity\n\n# Cleveland dot plot\nggplot(difference_data, aes(x = net_difference, y = reorder(state_postal, net_difference))) +\n  geom_point(aes(color = net_difference &gt; 0), size = 1) +\n  scale_color_manual(\n    values = c(\"TRUE\" = \"steelblue\", \"FALSE\" = \"firebrick\"),\n    labels = c(\"Group 2 & 4 Higher\", \"Group 1 & 3 Higher\")\n  ) +\n  labs(\n    title = \"Net Difference in Energy Usage Between Groups 1 & 3 vs. Groups 2 & 4\",\n    x = \"Net Difference (KWH)\",\n    y = \"State\",\n    color = \"Higher Group\"\n  ) +\n  theme_minimal()",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#socioeconomic",
    "href": "results.html#socioeconomic",
    "title": "3  Results",
    "section": "3.4 Socioeconomic",
    "text": "3.4 Socioeconomic\n\n\nCode\ndata &lt;- df |&gt;\n  select(state_postal, KWH, DOLLAREL, HDD65, CDD65, UATYP10, TYPEHUQ, MONEYPY, ENERGYASST20)\n\ndata &lt;- subset(data, KWH &lt;= 50000)\nggplot(data, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(alpha = 0.01, width = 0.5, height = 500) + \n  labs(title = \"Relationship between MONEYPY and KWH (Jitter Applied, Outliers Removed)\",\n       x = \"Money Spent (MONEYPY)\",\n       y = \"Energy Consumption (KWH)\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\ndata$color_group &lt;- ifelse(data$ENERGYASST20 == 1, \"With Energy Assistance\", \"Without Energy Assistance\")\n\nggplot(data, aes(x = MONEYPY, y = KWH, color = color_group)) +\n  geom_jitter(alpha = 0.1, width = 0.5, height = 500) + \n  geom_smooth(data = subset(data, ENERGYASST20 == 1), aes(x = MONEYPY, y = KWH), \n              method = \"lm\", formula = y ~ poly(x, 10), se = TRUE, color = \"red\", linetype = \"solid\") +\n  geom_smooth(data = subset(data, ENERGYASST20 != 1), aes(x = MONEYPY, y = KWH), \n              method = \"lm\", formula = y ~ poly(x, 10), se = TRUE, color = \"black\", linetype = \"dashed\") + \n  scale_color_manual(values = c(\"With Energy Assistance\" = \"red\", \"Without Energy Assistance\" = \"grey\")) +\n  labs(title = \"Regression Analysis: MONEYPY vs KWH (Jitter Applied, Separate Lines)\",\n       x = \"Money Spent (MONEYPY)\",\n       y = \"Energy Consumption (KWH)\",\n       color = \"Energy Assistance\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfiltered_data &lt;- data %&gt;%\n  filter(MONEYPY &lt;= 10) \n\navg_kwh_filtered &lt;- filtered_data %&gt;%\n  group_by(MONEYPY, ENERGYASST20) %&gt;%\n  summarise(mean_kwh = mean(KWH, na.rm = TRUE)) %&gt;%\n  mutate(ENERGYASST20 = ifelse(ENERGYASST20 == 1, \"With Assistance\", \"Without Assistance\"))\n\n\n`summarise()` has grouped output by 'MONEYPY'. You can override using the\n`.groups` argument.\n\n\nCode\nggplot(avg_kwh_filtered, aes(x = ENERGYASST20, y = mean_kwh, fill = ENERGYASST20)) +\n  geom_bar(stat = \"identity\", width = 0.6) +\n  scale_fill_manual(values = c(\"With Assistance\" = \"red\", \"Without Assistance\" = \"yellow\")) +\n  facet_wrap(~ MONEYPY, scales = \"free_x\", ncol = 2) + \n  labs(title = \"Average Energy Consumption Faceted by MONEYPY (MONEYPY &lt; 10)\",\n       x = \"Energy Assistance Status\",\n       y = \"Average Energy Consumption (KWH)\",\n       fill = \"Assistance Status\") +\n  theme_minimal() +\n  theme(aspect.ratio = 0.3)\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by Energy Assistance\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(ENERGYASST20)) + # Facet by energy assistance\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by TYPEHUQ\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(TYPEHUQ)) + # Facet by energy assistance\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by BA_climate\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(BA_climate)) + \n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by Energy Assistance\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(ENERGYASST20)) + # Facet by energy assistance\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by TYPEHUQ\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(TYPEHUQ)) + # Facet by energy assistance\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nCode\nggplot(energy, aes(x = MONEYPY, y = KWH)) +\n  geom_jitter(size = 0.2, alpha = 0.2, width=0.5) +\n  labs(\n    title = \"Scatterplot Faceted by BA_climate\",\n    x = \"MONEYPY\",\n    y = \"KWH\"\n  ) +\n  facet_wrap(~ as.factor(BA_climate)) + # Facet by energy assistance\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nType 2 housing matters more: uses significantly more, and as income increases, energy consumption increases",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "d3graph.html",
    "href": "d3graph.html",
    "title": "4  Interactive graph",
    "section": "",
    "text": "Interactive Barplot\n    \n\n\n    Choose 2 states and compare the annual average electricity usage per household\n    \n        Select State 1:\n        \n\n        Select State 2:",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Interactive graph</span>"
    ]
  }
]